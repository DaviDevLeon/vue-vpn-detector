(function(o,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o.VueVpnDetector={},o.Vue))})(this,function(o,r){"use strict";const c="https://api.ipify.org?format=json",d="http://ip-api.com/json/",y="continent,country,countryCode,region,regionName,city,isp,hosting,org,proxy,query";async function f(){try{const e=await fetch(c);if(!e.ok)throw new Error(`Error al obtener la IP: ${e.statusText}`);return(await e.json()).ip}catch(e){throw console.error("[API Error] No se pudo obtener la dirección IP:",e),new Error("No se pudo obtener la dirección IP. Por favor, verifica tu conexión a internet.")}}async function p(e){try{const t=await fetch(`${d}${e}?fields=${y}`);if(!t.ok)throw new Error(`Error al consultar ip-api.com: ${t.statusText}`);const a=await t.json();if(a.status==="fail")throw new Error(`ip-api.com reportó un error: ${a.message}`);return a}catch(t){throw console.error("[API Error] No se pudo obtener la información detallada de la IP:",t),new Error(`No se pudo obtener la información de la IP: ${t.message}`)}}const n=r.ref(null),l=r.ref(!1),u=r.ref(null);let i=null;async function s(e=!1){return l.value&&!e?i:n.value&&!e?Promise.resolve():(l.value=!0,u.value=null,n.value=null,i=(async()=>{try{const t=await f(),a=await p(t);n.value=a}catch(t){u.value=t.message,n.value=null}finally{l.value=!1,i=null}})(),i)}s();const g={get isVpn(){var e;return((e=r.readonly(n).value)==null?void 0:e.proxy)??null},get continent(){var e;return((e=r.readonly(n).value)==null?void 0:e.continent)??null},get country(){var e;return((e=r.readonly(n).value)==null?void 0:e.country)??null},get countryCode(){var e;return((e=r.readonly(n).value)==null?void 0:e.countryCode)??null},get region(){var e;return((e=r.readonly(n).value)==null?void 0:e.region)??null},get regionName(){var e;return((e=r.readonly(n).value)==null?void 0:e.regionName)??null},get city(){var e;return((e=r.readonly(n).value)==null?void 0:e.city)??null},get isp(){var e;return((e=r.readonly(n).value)==null?void 0:e.isp)??null},get hosting(){var e;return((e=r.readonly(n).value)==null?void 0:e.hosting)??null},get org(){var e;return((e=r.readonly(n).value)==null?void 0:e.org)??null},get query(){var e;return((e=r.readonly(n).value)==null?void 0:e.query)??null},get isLoading(){return r.readonly(l).value},get error(){return r.readonly(u).value},load:s};o.useVpnDetector=g,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
